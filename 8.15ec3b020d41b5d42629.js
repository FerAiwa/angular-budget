(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Wm2z:function(t,e,b){"use strict";b.r(e),b.d(e,"ProjectsModule",(function(){return P}));var a=b("ofXK"),c=b("PCNd"),n=b("tyNb"),s=b("fXoL"),i=b("cplz"),o=b("nXCA"),r=b("zkvF"),l=b("IW55"),d=b("uYLu"),u=b("qnzs"),h=b("ib9G");function L(t,e){if(1&t&&(s.Mb(0,"header"),s.Mb(1,"h2"),s.lc(2),s.Lb(),s.Mb(3,"p"),s.lc(4),s.Lb(),s.Mb(5,"p"),s.lc(6," Presupuesto: "),s.Mb(7,"b"),s.lc(8),s.Vb(9,"number"),s.Lb(),s.Ib(10,"ab-dates",3),s.Lb(),s.Lb()),2&t){const t=s.Ub();s.xb(2),s.nc(" ",t.project.title," "),s.xb(2),s.mc(t.project.description),s.xb(4),s.nc("",s.Wb(9,5,t.project.budget)," \u20ac"),s.xb(2),s.ac("start",t.project.start)("end",t.project.end)}}function p(t,e){1&t&&s.Ib(0,"ab-no-data-yet")}function M(t,e){if(1&t&&s.Ib(0,"ab-data-value",6),2&t){const t=e.$implicit;s.bc("value",t.done?"Hecho":"Pendiente"),s.ac("label",t.title)("isOk",t.done)}}function f(t,e){if(1&t&&(s.Ib(0,"ab-data-value",6),s.Vb(1,"number")),2&t){const t=e.$implicit;s.cc("value","",s.Wb(1,3,t.amount)," \u20ac"),s.ac("label",t.title)("isOk","Ingreso"===t.type)}}function g(t,e){if(1&t&&(s.Kb(0),s.Mb(1,"section"),s.Mb(2,"aside"),s.Mb(3,"header"),s.Mb(4,"h3"),s.lc(5,"Tareas"),s.Lb(),s.Lb(),s.jc(6,M,1,3,"ab-data-value",4),s.Lb(),s.Mb(7,"aside"),s.Mb(8,"header"),s.Mb(9,"h3"),s.lc(10,"Transacciones"),s.Lb(),s.Lb(),s.jc(11,f,2,5,"ab-data-value",4),s.Lb(),s.Lb(),s.Mb(12,"footer"),s.Mb(13,"nav"),s.Mb(14,"ul"),s.Mb(15,"li"),s.Mb(16,"a"),s.Mb(17,"i"),s.lc(18,"Cancelar Proyecto"),s.Lb(),s.Lb(),s.Lb(),s.Mb(19,"li"),s.Mb(20,"a"),s.Mb(21,"i"),s.lc(22,"Borrar Proyecto"),s.Lb(),s.Lb(),s.Lb(),s.Mb(23,"li"),s.Mb(24,"a",5),s.Mb(25,"i"),s.lc(26,"Crear Proyecto"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Jb()),2&t){const t=s.Ub();s.xb(6),s.ac("ngForOf",t.tasks),s.xb(5),s.ac("ngForOf",t.transactions)}}let j=(()=>{class t{constructor(t,e,b,a){this.activatedRoute=t,this.dataService=e,this.logicService=b,this.utilService=a,this.loaded=!1,this.onProjectLoaded={next:t=>{this.project=t,this.utilService.setDocumentTitle(this.project.title),this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=this.logicService.filterTransactionsByProjectId(t,this.projectSlug),this.dataService.getTasks$().subscribe(this.onTasksLoaded)}},this.onTasksLoaded={next:t=>{this.tasks=this.logicService.filterTasksByProjectId(t,this.projectSlug),this.loaded=!0}}}ngOnInit(){this.projectSlug=this.activatedRoute.snapshot.params.id,this.loadData()}loadData(){this.dataService.getProject$(this.projectSlug).subscribe(this.onProjectLoaded)}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(n.a),s.Hb(i.a),s.Hb(o.a),s.Hb(r.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["ab-project"]],decls:6,vars:3,consts:[[4,"ngIf"],["noDataYet",""],[4,"ngIf","ngIfElse"],[3,"start","end"],[3,"label","value","isOk",4,"ngFor","ngForOf"],["routerLink","../new"],[3,"label","value","isOk"]],template:function(t,e){if(1&t&&(s.Mb(0,"ab-article"),s.jc(1,L,11,7,"header",0),s.Mb(2,"main"),s.jc(3,p,1,0,"ng-template",null,1,s.kc),s.jc(5,g,27,2,"ng-container",2),s.Lb(),s.Lb()),2&t){const t=s.gc(4);s.xb(1),s.ac("ngIf",e.loaded),s.xb(4),s.ac("ngIf",e.loaded)("ngIfElse",t)}},directives:[l.a,a.l,d.a,u.a,a.k,n.d,h.a],pipes:[a.e],styles:[""]}),t})();function v(t,e){1&t&&s.Ib(0,"ab-no-data-yet")}function m(t,e){1&t&&(s.Mb(0,"sup"),s.lc(1,"*"),s.Lb())}const y=function(t){return[t]};function x(t,e){if(1&t&&(s.Mb(0,"tr"),s.Mb(1,"td"),s.Mb(2,"a",4),s.lc(3),s.Lb(),s.Lb(),s.Mb(4,"td"),s.lc(5),s.Vb(6,"date"),s.Lb(),s.Mb(7,"td"),s.lc(8),s.Vb(9,"date"),s.Lb(),s.Mb(10,"td"),s.lc(11),s.Vb(12,"number"),s.Lb(),s.Mb(13,"td"),s.lc(14),s.Vb(15,"number"),s.Lb(),s.Mb(16,"td"),s.lc(17),s.Vb(18,"number"),s.Lb(),s.Mb(19,"td"),s.lc(20),s.Vb(21,"number"),s.Lb(),s.Mb(22,"td"),s.lc(23),s.Vb(24,"number"),s.jc(25,m,2,0,"sup",5),s.Lb(),s.Lb()),2&t){const t=e.$implicit;s.xb(2),s.ac("routerLink",s.dc(26,y,t.id)),s.xb(1),s.mc(t.title),s.xb(2),s.nc(" ",s.Xb(6,10,t.start,"dd/MM/yyyy")," "),s.xb(3),s.nc(" ",s.Xb(9,13,t.end,"dd/MM/yyyy")," "),s.xb(3),s.nc(" ",s.Wb(12,16,t.budget)," \u20ac "),s.xb(3),s.nc(" ",s.Wb(15,18,t.totalExpenses)," \u20ac "),s.xb(3),s.nc(" ",s.Wb(18,20,t.totalIncomes)," \u20ac "),s.xb(3),s.nc(" ",s.Wb(21,22,t.profit)," \u20ac "),s.xb(3),s.nc(" ",s.Wb(24,24,t.balance)," \u20ac "),s.xb(2),s.ac("ngIf",t.balance<0)}}function I(t,e){if(1&t&&(s.Kb(0),s.Mb(1,"table"),s.Mb(2,"thead"),s.Mb(3,"tr"),s.Mb(4,"th"),s.lc(5," Proyecto "),s.Lb(),s.Mb(6,"th"),s.lc(7," Inicio "),s.Lb(),s.Mb(8,"th"),s.lc(9," Fin "),s.Lb(),s.Mb(10,"th"),s.lc(11," Presupuesto "),s.Lb(),s.Mb(12,"th"),s.lc(13," Gastos "),s.Lb(),s.Mb(14,"th"),s.lc(15," Ingresos "),s.Lb(),s.Mb(16,"th"),s.lc(17," Beneficio "),s.Lb(),s.Mb(18,"th"),s.lc(19," Saldo "),s.Lb(),s.Lb(),s.Lb(),s.Mb(20,"tbody"),s.jc(21,x,26,28,"tr",3),s.Lb(),s.Lb(),s.Jb()),2&t){const t=s.Ub();s.xb(21),s.ac("ngForOf",t.projectViews)}}const k=[{path:"",component:(()=>{class t{constructor(t,e){this.dataService=t,this.logicService=e,this.projectViews=[],this.loaded=!1,this.onProjectsLoaded={next:t=>{this.projects=t,this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=t,this.setDataViews()}},this.loadData()}ngOnInit(){this.loadData()}loadData(){this.dataService.getProjects$().subscribe(this.onProjectsLoaded)}setDataViews(){this.projectViews=this.logicService.composeProjectViews(this.projects,this.transactions),this.loaded=!0}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(i.a),s.Hb(o.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["ab-projects"]],decls:14,vars:2,consts:[["routerLink","new"],["noDataYet",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngIf"]],template:function(t,e){if(1&t&&(s.Mb(0,"ab-article"),s.Mb(1,"header"),s.Mb(2,"nav"),s.Mb(3,"h2"),s.lc(4," Gesti\xf3n de proyectos "),s.Lb(),s.Mb(5,"ul"),s.Mb(6,"li"),s.Mb(7,"a",0),s.Mb(8,"i"),s.lc(9,"Nuevo proyecto"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(10,"main"),s.jc(11,v,1,0,"ng-template",null,1,s.kc),s.jc(13,I,22,1,"ng-container",2),s.Lb(),s.Lb()),2&t){const t=s.gc(12);s.xb(13),s.ac("ngIf",e.loaded)("ngIfElse",t)}},directives:[l.a,n.d,a.l,u.a,a.k],pipes:[a.d,a.e],styles:[""]}),t})()},{path:"new",loadChildren:()=>b.e(7).then(b.bind(null,"QbB7")).then((t=>t.NewProjectModule)),data:{title:"Nuevo proyecto"}},{path:":id",component:j}];let w=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(k)],n.e]}),t})(),P=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[a.b,w,c.a]]}),t})()}}]);