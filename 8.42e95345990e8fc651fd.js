(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Wm2z:function(t,e,b){"use strict";b.r(e),b.d(e,"ProjectsModule",(function(){return k}));var o=b("ofXK"),c=b("tyNb"),s=b("fXoL"),n=b("tk/3");function i(t,e){if(1&t&&(s.Kb(0,"mark"),s.ec(1),s.Jb()),2&t){const t=s.Sb().$implicit;s.xb(1),s.gc(" ",t.title," ")}}function r(t,e){if(1&t&&(s.Kb(0,"span"),s.ec(1),s.Jb()),2&t){const t=s.Sb().$implicit;s.xb(1),s.gc(" ",t.title," ")}}function a(t,e){if(1&t&&(s.Kb(0,"li"),s.cc(1,i,2,1,"mark",4),s.cc(2,r,2,1,"span",4),s.Jb()),2&t){const t=e.$implicit;s.xb(1),s.Wb("ngIf",t.done),s.xb(1),s.Wb("ngIf",!t.done)}}function p(t,e){if(1&t&&(s.Kb(0,"mark"),s.ec(1),s.Tb(2,"number"),s.Jb()),2&t){const t=s.Sb().$implicit;s.xb(1),s.hc(" ",t.title," +",s.Ub(2,2,t.amount)," \u20ac ")}}function l(t,e){if(1&t&&(s.Kb(0,"span"),s.ec(1),s.Tb(2,"number"),s.Kb(3,"sup"),s.ec(4,"!"),s.Jb(),s.Jb()),2&t){const t=s.Sb().$implicit;s.xb(1),s.hc(" ",t.title," -",s.Ub(2,2,t.amount)," \u20ac ")}}function d(t,e){if(1&t&&(s.Kb(0,"li"),s.cc(1,p,3,4,"mark",4),s.cc(2,l,5,4,"span",4),s.Jb()),2&t){const t=e.$implicit;s.xb(1),s.Wb("ngIf","Ingreso"===t.type),s.xb(1),s.Wb("ngIf","Gasto"===t.type)}}function h(t,e){if(1&t&&(s.Kb(0,"article"),s.Kb(1,"header"),s.Kb(2,"h2"),s.ec(3),s.Jb(),s.Kb(4,"p"),s.ec(5),s.Jb(),s.Kb(6,"p"),s.ec(7," Presupuesto: "),s.Kb(8,"b"),s.ec(9),s.Tb(10,"number"),s.Jb(),s.Kb(11,"i"),s.ec(12),s.Tb(13,"date"),s.Tb(14,"date"),s.Jb(),s.Jb(),s.Jb(),s.Kb(15,"section"),s.Kb(16,"aside"),s.Kb(17,"header"),s.Kb(18,"h3"),s.ec(19,"Tareas"),s.Jb(),s.Jb(),s.Kb(20,"ul"),s.cc(21,a,3,2,"li",2),s.Jb(),s.Jb(),s.Kb(22,"aside"),s.Kb(23,"header"),s.Kb(24,"h3"),s.ec(25,"Transacciones"),s.Jb(),s.Jb(),s.Kb(26,"ul"),s.cc(27,d,3,2,"li",2),s.Jb(),s.Jb(),s.Jb(),s.Kb(28,"footer"),s.Kb(29,"nav"),s.Kb(30,"ul"),s.Kb(31,"li"),s.Kb(32,"a"),s.Kb(33,"i"),s.ec(34,"Cancelar Proyecto"),s.Jb(),s.Jb(),s.Jb(),s.Kb(35,"li"),s.Kb(36,"a"),s.Kb(37,"i"),s.ec(38,"Borrar Proyecto"),s.Jb(),s.Jb(),s.Jb(),s.Kb(39,"li"),s.Kb(40,"a",3),s.Kb(41,"i"),s.ec(42,"Crear Proyecto"),s.Jb(),s.Jb(),s.Jb(),s.Jb(),s.Jb(),s.Jb(),s.Jb()),2&t){const t=s.Sb();s.xb(3),s.gc(" ",t.project.title," "),s.xb(2),s.fc(t.project.description),s.xb(4),s.gc("",s.Ub(10,7,t.project.budget)," \u20ac"),s.xb(3),s.hc(" Inicio: ",s.Vb(13,9,t.project.start,"shortDate")," Fin :",s.Vb(14,12,t.project.end,"shortDate")," "),s.xb(9),s.Wb("ngForOf",t.tasks),s.xb(6),s.Wb("ngForOf",t.transactions)}}function u(t,e){1&t&&(s.Kb(0,"section"),s.Kb(1,"blockquote"),s.ec(2,"Esperando datos..."),s.Jb(),s.Jb())}let J=(()=>{class t{constructor(t,e){this.activatedRoute=t,this.httpClient=e,this.loaded=!1,this.rootUrl="https://api-base.herokuapp.com/api/pub",this.onProjectLoaded={next:t=>{this.project=t,this.httpClient.get(this.rootUrl+"/transactions").subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=t.filter((t=>t.projectId===this.projectSlug)),this.httpClient.get(this.rootUrl+"/tasks").subscribe(this.onTasksLoaded)}},this.onTasksLoaded={next:t=>{this.tasks=t.filter((t=>t.projectId===this.projectSlug)),this.loaded=!0}}}ngOnInit(){this.projectSlug=this.activatedRoute.snapshot.params.id,this.loadData()}loadData(){this.httpClient.get(`${this.rootUrl}/projects/${this.projectSlug}`).subscribe(this.onProjectLoaded)}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(c.a),s.Hb(n.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["ab-project"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noDataYet",""],[4,"ngFor","ngForOf"],["routerLink","../new"],[4,"ngIf"]],template:function(t,e){if(1&t&&(s.cc(0,h,43,15,"article",0),s.cc(1,u,3,0,"ng-template",null,1,s.dc)),2&t){const t=s.Zb(2);s.Wb("ngIf",e.loaded)("ngIfElse",t)}},directives:[o.k,o.j,c.d],pipes:[o.e,o.d],styles:[""]}),t})();var f=b("2FCU");function K(t,e){1&t&&(s.Kb(0,"sup"),s.ec(1,"*"),s.Jb())}const g=function(t){return[t]};function m(t,e){if(1&t&&(s.Kb(0,"tr"),s.Kb(1,"td"),s.Kb(2,"a",4),s.ec(3),s.Jb(),s.Jb(),s.Kb(4,"td"),s.ec(5),s.Tb(6,"date"),s.Jb(),s.Kb(7,"td"),s.ec(8),s.Tb(9,"date"),s.Jb(),s.Kb(10,"td"),s.ec(11),s.Tb(12,"number"),s.Jb(),s.Kb(13,"td"),s.ec(14),s.Tb(15,"number"),s.Jb(),s.Kb(16,"td"),s.ec(17),s.Tb(18,"number"),s.Jb(),s.Kb(19,"td"),s.ec(20),s.Tb(21,"number"),s.Jb(),s.Kb(22,"td"),s.ec(23),s.Tb(24,"number"),s.cc(25,K,2,0,"sup",5),s.Jb(),s.Jb()),2&t){const t=e.$implicit;s.xb(2),s.Wb("routerLink",s.Xb(26,g,t.id)),s.xb(1),s.fc(t.title),s.xb(2),s.gc(" ",s.Vb(6,10,t.start,"dd/MM/yyyy")," "),s.xb(3),s.gc(" ",s.Vb(9,13,t.end,"dd/MM/yyyy")," "),s.xb(3),s.gc(" ",s.Ub(12,16,t.budget)," \u20ac "),s.xb(3),s.gc(" ",s.Ub(15,18,t.totalExpenses)," \u20ac "),s.xb(3),s.gc(" ",s.Ub(18,20,t.totalIncomes)," \u20ac "),s.xb(3),s.gc(" ",s.Ub(21,22,t.profit)," \u20ac "),s.xb(3),s.gc(" ",s.Ub(24,24,t.balance)," \u20ac "),s.xb(2),s.Wb("ngIf",t.balance<0)}}function x(t,e){if(1&t&&(s.Kb(0,"section"),s.Kb(1,"header"),s.Kb(2,"nav"),s.Kb(3,"h2"),s.ec(4," Gesti\xf3n de proyectos "),s.Jb(),s.Kb(5,"ul"),s.Kb(6,"li"),s.Kb(7,"a",2),s.Kb(8,"i"),s.ec(9,"Nuevo proyecto"),s.Jb(),s.Jb(),s.Jb(),s.Jb(),s.Jb(),s.Jb(),s.Kb(10,"table"),s.Kb(11,"thead"),s.Kb(12,"tr"),s.Kb(13,"th"),s.ec(14," Proyecto "),s.Jb(),s.Kb(15,"th"),s.ec(16," Inicio "),s.Jb(),s.Kb(17,"th"),s.ec(18," Fin "),s.Jb(),s.Kb(19,"th"),s.ec(20," Presupuesto "),s.Jb(),s.Kb(21,"th"),s.ec(22," Gastos "),s.Jb(),s.Kb(23,"th"),s.ec(24," Ingresos "),s.Jb(),s.Kb(25,"th"),s.ec(26," Beneficio "),s.Jb(),s.Kb(27,"th"),s.ec(28," Saldo "),s.Jb(),s.Jb(),s.Jb(),s.Kb(29,"tbody"),s.cc(30,m,26,28,"tr",3),s.Jb(),s.Jb(),s.Jb()),2&t){const t=s.Sb();s.xb(30),s.Wb("ngForOf",t.projectViews)}}function j(t,e){1&t&&(s.Kb(0,"section"),s.Kb(1,"blockquote"),s.ec(2,"Esperando datos..."),s.Jb(),s.Jb())}const I=[{path:"",component:(()=>{class t{constructor(t){this.httpClient=t,this.projectViews=[],this.loaded=!1,this.rootUrl="https://api-base.herokuapp.com/api/pub",this.onProjectsLoaded={next:t=>{this.projects=t,this.httpClient.get(this.rootUrl+"/transactions").subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=t,this.setDataViews()}},this.loadData()}ngOnInit(){this.loadData()}loadData(){this.httpClient.get(this.rootUrl+"/projects").subscribe(this.onProjectsLoaded)}setDataViews(){this.setProjectsView(),this.loaded=!0}setProjectsView(){this.projectViews=this.projects.map((t=>{const e=Object.assign({},t),b=this.transactions.filter((t=>t.projectId===e.id));return this.processExpenses(b,e),this.processIncomes(b,e),e.profit=e.totalIncomes-e.totalExpenses,e.balance=e.budget+e.profit,e}))}processIncomes(t,e){const b=t.filter((t=>t.type===f.a.Incoming));e.totalIncomes=b.length>0?b.map((t=>t.amount)).reduce(((t,e)=>t+e)):0}processExpenses(t,e){const b=t.filter((t=>t.type===f.a.Expense));e.totalExpenses=b.length>0?b.map((t=>t.amount)).reduce(((t,e)=>t+e)):0}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(n.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["ab-projects"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noDataYet",""],["routerLink","new"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngIf"]],template:function(t,e){if(1&t&&(s.cc(0,x,31,1,"section",0),s.cc(1,j,3,0,"ng-template",null,1,s.dc)),2&t){const t=s.Zb(2);s.Wb("ngIf",e.loaded)("ngIfElse",t)}},directives:[o.k,c.d,o.j],pipes:[o.d,o.e],styles:[""]}),t})()},{path:"new",loadChildren:()=>b.e(7).then(b.bind(null,"QbB7")).then((t=>t.NewProjectModule)),data:{title:"Nuevo proyecto"}},{path:":id",component:J}];let y=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[c.e.forChild(I)],c.e]}),t})(),k=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[o.b,y]]}),t})()}}]);