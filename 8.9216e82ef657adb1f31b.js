(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Wm2z:function(t,e,b){"use strict";b.r(e),b.d(e,"ProjectsModule",(function(){return S}));var c=b("ofXK"),i=b("tyNb"),n=b("fXoL"),o=b("cplz"),s=b("nXCA"),a=b("zkvF");function r(t,e){if(1&t&&(n.Kb(0,"mark"),n.ec(1),n.Jb()),2&t){const t=n.Sb().$implicit;n.xb(1),n.gc(" ",t.title," ")}}function d(t,e){if(1&t&&(n.Kb(0,"span"),n.ec(1),n.Jb()),2&t){const t=n.Sb().$implicit;n.xb(1),n.gc(" ",t.title," ")}}function l(t,e){if(1&t&&(n.Kb(0,"li"),n.cc(1,r,2,1,"mark",4),n.cc(2,d,2,1,"span",4),n.Jb()),2&t){const t=e.$implicit;n.xb(1),n.Wb("ngIf",t.done),n.xb(1),n.Wb("ngIf",!t.done)}}function u(t,e){if(1&t&&(n.Kb(0,"mark"),n.ec(1),n.Tb(2,"number"),n.Jb()),2&t){const t=n.Sb().$implicit;n.xb(1),n.hc(" ",t.title," +",n.Ub(2,2,t.amount)," \u20ac ")}}function h(t,e){if(1&t&&(n.Kb(0,"span"),n.ec(1),n.Tb(2,"number"),n.Kb(3,"sup"),n.ec(4,"!"),n.Jb(),n.Jb()),2&t){const t=n.Sb().$implicit;n.xb(1),n.hc(" ",t.title," -",n.Ub(2,2,t.amount)," \u20ac ")}}function p(t,e){if(1&t&&(n.Kb(0,"li"),n.cc(1,u,3,4,"mark",4),n.cc(2,h,5,4,"span",4),n.Jb()),2&t){const t=e.$implicit;n.xb(1),n.Wb("ngIf","Ingreso"===t.type),n.xb(1),n.Wb("ngIf","Gasto"===t.type)}}function J(t,e){if(1&t&&(n.Kb(0,"article"),n.Kb(1,"header"),n.Kb(2,"h2"),n.ec(3),n.Jb(),n.Kb(4,"p"),n.ec(5),n.Jb(),n.Kb(6,"p"),n.ec(7," Presupuesto: "),n.Kb(8,"b"),n.ec(9),n.Tb(10,"number"),n.Jb(),n.Kb(11,"i"),n.ec(12),n.Tb(13,"date"),n.Tb(14,"date"),n.Jb(),n.Jb(),n.Jb(),n.Kb(15,"section"),n.Kb(16,"aside"),n.Kb(17,"header"),n.Kb(18,"h3"),n.ec(19,"Tareas"),n.Jb(),n.Jb(),n.Kb(20,"ul"),n.cc(21,l,3,2,"li",2),n.Jb(),n.Jb(),n.Kb(22,"aside"),n.Kb(23,"header"),n.Kb(24,"h3"),n.ec(25,"Transacciones"),n.Jb(),n.Jb(),n.Kb(26,"ul"),n.cc(27,p,3,2,"li",2),n.Jb(),n.Jb(),n.Jb(),n.Kb(28,"footer"),n.Kb(29,"nav"),n.Kb(30,"ul"),n.Kb(31,"li"),n.Kb(32,"a"),n.Kb(33,"i"),n.ec(34,"Cancelar Proyecto"),n.Jb(),n.Jb(),n.Jb(),n.Kb(35,"li"),n.Kb(36,"a"),n.Kb(37,"i"),n.ec(38,"Borrar Proyecto"),n.Jb(),n.Jb(),n.Jb(),n.Kb(39,"li"),n.Kb(40,"a",3),n.Kb(41,"i"),n.ec(42,"Crear Proyecto"),n.Jb(),n.Jb(),n.Jb(),n.Jb(),n.Jb(),n.Jb(),n.Jb()),2&t){const t=n.Sb();n.xb(3),n.gc(" ",t.project.title," "),n.xb(2),n.fc(t.project.description),n.xb(4),n.gc("",n.Ub(10,7,t.project.budget)," \u20ac"),n.xb(3),n.hc(" Inicio: ",n.Vb(13,9,t.project.start,"shortDate")," Fin :",n.Vb(14,12,t.project.end,"shortDate")," "),n.xb(9),n.Wb("ngForOf",t.tasks),n.xb(6),n.Wb("ngForOf",t.transactions)}}function K(t,e){1&t&&(n.Kb(0,"section"),n.Kb(1,"blockquote"),n.ec(2,"Esperando datos..."),n.Jb(),n.Jb())}let f=(()=>{class t{constructor(t,e,b,c){this.activatedRoute=t,this.dataService=e,this.logicService=b,this.utilService=c,this.loaded=!1,this.onProjectLoaded={next:t=>{this.project=t,this.utilService.setDocumentTitle(this.project.title),this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=this.logicService.filterTransactionsByProjectId(t,this.projectSlug),this.dataService.getTasks$().subscribe(this.onTasksLoaded)}},this.onTasksLoaded={next:t=>{this.tasks=this.logicService.filterTasksByProjectId(t,this.projectSlug),this.loaded=!0}}}ngOnInit(){this.projectSlug=this.activatedRoute.snapshot.params.id,this.loadData()}loadData(){this.dataService.getProject$(this.projectSlug).subscribe(this.onProjectLoaded)}}return t.\u0275fac=function(e){return new(e||t)(n.Hb(i.a),n.Hb(o.a),n.Hb(s.a),n.Hb(a.a))},t.\u0275cmp=n.Bb({type:t,selectors:[["ab-project"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noDataYet",""],[4,"ngFor","ngForOf"],["routerLink","../new"],[4,"ngIf"]],template:function(t,e){if(1&t&&(n.cc(0,J,43,15,"article",0),n.cc(1,K,3,0,"ng-template",null,1,n.dc)),2&t){const t=n.Zb(2);n.Wb("ngIf",e.loaded)("ngIfElse",t)}},directives:[c.k,c.j,i.d],pipes:[c.e,c.d],styles:[""]}),t})();function g(t,e){1&t&&(n.Kb(0,"sup"),n.ec(1,"*"),n.Jb())}const m=function(t){return[t]};function j(t,e){if(1&t&&(n.Kb(0,"tr"),n.Kb(1,"td"),n.Kb(2,"a",4),n.ec(3),n.Jb(),n.Jb(),n.Kb(4,"td"),n.ec(5),n.Tb(6,"date"),n.Jb(),n.Kb(7,"td"),n.ec(8),n.Tb(9,"date"),n.Jb(),n.Kb(10,"td"),n.ec(11),n.Tb(12,"number"),n.Jb(),n.Kb(13,"td"),n.ec(14),n.Tb(15,"number"),n.Jb(),n.Kb(16,"td"),n.ec(17),n.Tb(18,"number"),n.Jb(),n.Kb(19,"td"),n.ec(20),n.Tb(21,"number"),n.Jb(),n.Kb(22,"td"),n.ec(23),n.Tb(24,"number"),n.cc(25,g,2,0,"sup",5),n.Jb(),n.Jb()),2&t){const t=e.$implicit;n.xb(2),n.Wb("routerLink",n.Xb(26,m,t.id)),n.xb(1),n.fc(t.title),n.xb(2),n.gc(" ",n.Vb(6,10,t.start,"dd/MM/yyyy")," "),n.xb(3),n.gc(" ",n.Vb(9,13,t.end,"dd/MM/yyyy")," "),n.xb(3),n.gc(" ",n.Ub(12,16,t.budget)," \u20ac "),n.xb(3),n.gc(" ",n.Ub(15,18,t.totalExpenses)," \u20ac "),n.xb(3),n.gc(" ",n.Ub(18,20,t.totalIncomes)," \u20ac "),n.xb(3),n.gc(" ",n.Ub(21,22,t.profit)," \u20ac "),n.xb(3),n.gc(" ",n.Ub(24,24,t.balance)," \u20ac "),n.xb(2),n.Wb("ngIf",t.balance<0)}}function x(t,e){if(1&t&&(n.Kb(0,"section"),n.Kb(1,"header"),n.Kb(2,"nav"),n.Kb(3,"h2"),n.ec(4," Gesti\xf3n de proyectos "),n.Jb(),n.Kb(5,"ul"),n.Kb(6,"li"),n.Kb(7,"a",2),n.Kb(8,"i"),n.ec(9,"Nuevo proyecto"),n.Jb(),n.Jb(),n.Jb(),n.Jb(),n.Jb(),n.Jb(),n.Kb(10,"table"),n.Kb(11,"thead"),n.Kb(12,"tr"),n.Kb(13,"th"),n.ec(14," Proyecto "),n.Jb(),n.Kb(15,"th"),n.ec(16," Inicio "),n.Jb(),n.Kb(17,"th"),n.ec(18," Fin "),n.Jb(),n.Kb(19,"th"),n.ec(20," Presupuesto "),n.Jb(),n.Kb(21,"th"),n.ec(22," Gastos "),n.Jb(),n.Kb(23,"th"),n.ec(24," Ingresos "),n.Jb(),n.Kb(25,"th"),n.ec(26," Beneficio "),n.Jb(),n.Kb(27,"th"),n.ec(28," Saldo "),n.Jb(),n.Jb(),n.Jb(),n.Kb(29,"tbody"),n.cc(30,j,26,28,"tr",3),n.Jb(),n.Jb(),n.Jb()),2&t){const t=n.Sb();n.xb(30),n.Wb("ngForOf",t.projectViews)}}function y(t,e){1&t&&(n.Kb(0,"section"),n.Kb(1,"blockquote"),n.ec(2,"Esperando datos..."),n.Jb(),n.Jb())}const v=[{path:"",component:(()=>{class t{constructor(t,e){this.dataService=t,this.logicService=e,this.projectViews=[],this.loaded=!1,this.onProjectsLoaded={next:t=>{this.projects=t,this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=t,this.setDataViews()}},this.loadData()}ngOnInit(){this.loadData()}loadData(){this.dataService.getProjects$().subscribe(this.onProjectsLoaded)}setDataViews(){this.projectViews=this.logicService.composeProjectViews(this.projects,this.transactions),this.loaded=!0}}return t.\u0275fac=function(e){return new(e||t)(n.Hb(o.a),n.Hb(s.a))},t.\u0275cmp=n.Bb({type:t,selectors:[["ab-projects"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noDataYet",""],["routerLink","new"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngIf"]],template:function(t,e){if(1&t&&(n.cc(0,x,31,1,"section",0),n.cc(1,y,3,0,"ng-template",null,1,n.dc)),2&t){const t=n.Zb(2);n.Wb("ngIf",e.loaded)("ngIfElse",t)}},directives:[c.k,i.d,c.j],pipes:[c.d,c.e],styles:[""]}),t})()},{path:"new",loadChildren:()=>b.e(7).then(b.bind(null,"QbB7")).then((t=>t.NewProjectModule)),data:{title:"Nuevo proyecto"}},{path:":id",component:f}];let T=(()=>{class t{}return t.\u0275mod=n.Fb({type:t}),t.\u0275inj=n.Eb({factory:function(e){return new(e||t)},imports:[[i.e.forChild(v)],i.e]}),t})(),S=(()=>{class t{}return t.\u0275mod=n.Fb({type:t}),t.\u0275inj=n.Eb({factory:function(e){return new(e||t)},imports:[[c.b,T]]}),t})()}}]);