(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"0B1/":function(t,e,a){"use strict";a.r(e),a.d(e,"ProjectsModule",(function(){return F}));var b=a("ofXK"),c=a("PCNd"),n=a("tyNb"),s=a("fXoL"),i=a("cplz"),o=a("nXCA"),r=a("zkvF"),l=a("qzOI");let d=(()=>{class t{constructor(){this.userFormat="dd/MM/yyyy",this.botFormat="yyyy/MM/dd"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Bb({type:t,selectors:[["ab-date-time"]],inputs:{date:"date",userFormat:"userFormat",botFormat:"botFormat"},decls:4,vars:8,consts:[[3,"dateTime"]],template:function(t,e){1&t&&(s.Mb(0,"time",0),s.Vb(1,"date"),s.lc(2),s.Vb(3,"date"),s.Lb()),2&t&&(s.bc("dateTime",s.Xb(1,2,e.date,e.botFormat)),s.xb(2),s.mc(s.Xb(3,5,e.date,e.userFormat)))},pipes:[b.d],styles:[""]}),t})(),u=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=s.Bb({type:t,selectors:[["ab-dates"]],inputs:{start:"start",end:"end"},decls:7,vars:2,consts:[[3,"date"]],template:function(t,e){1&t&&(s.Mb(0,"span"),s.Mb(1,"i"),s.lc(2," \u27fc "),s.Ib(3,"ab-date-time",0),s.lc(4," - "),s.Ib(5,"ab-date-time",0),s.lc(6," \u27fb "),s.Lb(),s.Lb()),2&t&&(s.xb(3),s.ac("date",e.start),s.xb(2),s.ac("date",e.end))},directives:[d],styles:[""]}),t})();var p=a("olyB"),h=a("d6BX");let L=(()=>{class t{constructor(t){this.util=t}transform(t,...e){return this.util.getFechaColoquial(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(r.a))},t.\u0275pipe=s.Gb({name:"timeAgo",type:t,pure:!0}),t})();function f(t,e){if(1&t&&(s.Mb(0,"header"),s.Mb(1,"h2"),s.lc(2),s.Lb(),s.Mb(3,"p"),s.lc(4),s.Lb(),s.Mb(5,"p"),s.Ib(6,"ab-dates",3),s.Lb(),s.Lb()),2&t){const t=s.Ub();s.xb(2),s.nc(" ",t.project.title," "),s.xb(2),s.mc(t.project.description),s.xb(2),s.ac("start",t.project.start)("end",t.project.end)}}function M(t,e){1&t&&s.Ib(0,"ab-no-data-yet")}function m(t,e){if(1&t&&s.Ib(0,"ab-label-value",12),2&t){const t=e.$implicit;s.bc("value",t.done?"Hecho":"Pendiente"),s.ac("label",t.title)("isOk",t.done)}}function v(t,e){if(1&t&&(s.Ib(0,"ab-label-value",12),s.Vb(1,"number")),2&t){const t=e.$implicit;s.cc("value","",s.Wb(1,3,t.amount)," \u20ac"),s.ac("label",t.title)("isOk","Ingreso"===t.type)}}function g(t,e){if(1&t&&(s.Kb(0),s.Mb(1,"aside"),s.Mb(2,"header"),s.Mb(3,"h3"),s.lc(4,"Datos"),s.Lb(),s.Lb(),s.Ib(5,"ab-label-value",4),s.Vb(6,"timeAgo"),s.Ib(7,"ab-label-value",5),s.Vb(8,"timeAgo"),s.Ib(9,"ab-label-value",6),s.Vb(10,"number"),s.Ib(11,"ab-label-value",7),s.Vb(12,"number"),s.Ib(13,"ab-label-value",8),s.Vb(14,"number"),s.Ib(15,"ab-label-value",9),s.Vb(16,"number"),s.Ib(17,"ab-label-value",10),s.Vb(18,"number"),s.Lb(),s.Mb(19,"section"),s.Mb(20,"aside"),s.Mb(21,"header"),s.Mb(22,"h3"),s.lc(23,"Tareas"),s.Lb(),s.Lb(),s.jc(24,m,1,3,"ab-label-value",11),s.Lb(),s.Mb(25,"aside"),s.Mb(26,"header"),s.Mb(27,"h3"),s.lc(28,"Transacciones"),s.Lb(),s.Lb(),s.jc(29,v,2,5,"ab-label-value",11),s.Lb(),s.Lb(),s.Mb(30,"footer"),s.Mb(31,"nav"),s.Mb(32,"ul"),s.Mb(33,"li"),s.Mb(34,"a"),s.Mb(35,"i"),s.lc(36,"Cancelar Proyecto"),s.Lb(),s.Lb(),s.Lb(),s.Mb(37,"li"),s.Mb(38,"a"),s.Mb(39,"i"),s.lc(40,"Borrar Proyecto"),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Jb()),2&t){const t=s.Ub();s.xb(5),s.bc("value",s.Wb(6,13,t.projectView.start)),s.xb(2),s.bc("value",s.Wb(8,15,t.projectView.end)),s.xb(2),s.cc("value","",s.Wb(10,17,t.projectView.budget)," \u20ac"),s.xb(2),s.cc("value","",s.Wb(12,19,t.projectView.totalExpenses)," \u20ac"),s.ac("isOk",!1),s.xb(2),s.cc("value","",s.Wb(14,21,t.projectView.totalIncomes)," \u20ac"),s.ac("isOk",!0),s.xb(2),s.cc("value","",s.Wb(16,23,t.projectView.profit)," \u20ac"),s.ac("isOk",t.projectView.profit>0),s.xb(2),s.cc("value","",s.Wb(18,25,t.projectView.balance)," \u20ac"),s.ac("isOk",t.projectView.balance>0),s.xb(7),s.ac("ngForOf",t.tasks),s.xb(5),s.ac("ngForOf",t.transactions)}}let j=(()=>{class t{constructor(t,e,a,b){this.activatedRoute=t,this.dataService=e,this.logicService=a,this.utilService=b,this.loaded=!1,this.onProjectLoaded={next:t=>{this.project=t,this.utilService.setDocumentTitle(this.project.title),this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=this.logicService.filterTransactionsByProjectId(t,this.projectSlug),this.dataService.getTasks$().subscribe(this.onTasksLoaded)}},this.onTasksLoaded={next:t=>{this.tasks=this.logicService.filterTasksByProjectId(t,this.projectSlug),this.projectView=this.logicService.composeProjectView(this.project,this.transactions),this.loaded=!0}}}ngOnInit(){this.projectSlug=this.activatedRoute.snapshot.params.id,this.loadData()}loadData(){this.dataService.getProject$(this.projectSlug).subscribe(this.onProjectLoaded)}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(n.a),s.Hb(i.a),s.Hb(o.a),s.Hb(r.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["ng-component"]],decls:6,vars:3,consts:[[4,"ngIf"],["noDataYet",""],[4,"ngIf","ngIfElse"],[3,"start","end"],["label","Inicio",3,"value"],["label","Fin",3,"value"],["label","Presupuesto",3,"value"],["label","Gastos",3,"value","isOk"],["label","Ingresos",3,"value","isOk"],["label","Beneficio",3,"value","isOk"],["label","Saldo",3,"value","isOk"],[3,"label","value","isOk",4,"ngFor","ngForOf"],[3,"label","value","isOk"]],template:function(t,e){if(1&t&&(s.Mb(0,"ab-article"),s.jc(1,f,7,4,"header",0),s.Mb(2,"main"),s.jc(3,M,1,0,"ng-template",null,1,s.kc),s.jc(5,g,41,27,"ng-container",2),s.Lb(),s.Lb()),2&t){const t=s.gc(4);s.xb(1),s.ac("ngIf",e.loaded),s.xb(4),s.ac("ngIf",e.loaded)("ngIfElse",t)}},directives:[l.a,b.l,u,p.a,h.a,b.k],pipes:[L,b.e],styles:[""]}),t})();function y(t,e){1&t&&s.Ib(0,"ab-no-data-yet")}function I(t,e){1&t&&(s.Mb(0,"sup"),s.lc(1,"*"),s.Lb())}const x=function(t){return[t]};function V(t,e){if(1&t&&(s.Mb(0,"tr"),s.Mb(1,"td"),s.Mb(2,"a",3),s.lc(3),s.Lb(),s.Lb(),s.Mb(4,"td"),s.lc(5),s.Vb(6,"date"),s.Lb(),s.Mb(7,"td"),s.lc(8),s.Vb(9,"date"),s.Lb(),s.Mb(10,"td"),s.lc(11),s.Vb(12,"number"),s.Lb(),s.Mb(13,"td"),s.lc(14),s.Vb(15,"number"),s.Lb(),s.Mb(16,"td"),s.lc(17),s.Vb(18,"number"),s.Lb(),s.Mb(19,"td"),s.lc(20),s.Vb(21,"number"),s.Lb(),s.Mb(22,"td"),s.lc(23),s.Vb(24,"number"),s.jc(25,I,2,0,"sup",4),s.Lb(),s.Lb()),2&t){const t=e.$implicit;s.xb(2),s.ac("routerLink",s.dc(26,x,t.id)),s.xb(1),s.mc(t.title),s.xb(2),s.nc(" ",s.Xb(6,10,t.start,"dd/MM/yyyy")," "),s.xb(3),s.nc(" ",s.Xb(9,13,t.end,"dd/MM/yyyy")," "),s.xb(3),s.nc(" ",s.Wb(12,16,t.budget)," \u20ac "),s.xb(3),s.nc(" ",s.Wb(15,18,t.totalExpenses)," \u20ac "),s.xb(3),s.nc(" ",s.Wb(18,20,t.totalIncomes)," \u20ac "),s.xb(3),s.nc(" ",s.Wb(21,22,t.profit)," \u20ac "),s.xb(3),s.nc(" ",s.Wb(24,24,t.balance)," \u20ac "),s.xb(2),s.ac("ngIf",t.balance<0)}}function w(t,e){if(1&t&&(s.Kb(0),s.Mb(1,"table"),s.Mb(2,"thead"),s.Mb(3,"tr"),s.Mb(4,"th"),s.lc(5," Proyecto "),s.Lb(),s.Mb(6,"th"),s.lc(7," Inicio "),s.Lb(),s.Mb(8,"th"),s.lc(9," Fin "),s.Lb(),s.Mb(10,"th"),s.lc(11," Presupuesto "),s.Lb(),s.Mb(12,"th"),s.lc(13," Gastos "),s.Lb(),s.Mb(14,"th"),s.lc(15," Ingresos "),s.Lb(),s.Mb(16,"th"),s.lc(17," Beneficio "),s.Lb(),s.Mb(18,"th"),s.lc(19," Saldo "),s.Lb(),s.Lb(),s.Lb(),s.Mb(20,"tbody"),s.jc(21,V,26,28,"tr",2),s.Lb(),s.Lb(),s.Jb()),2&t){const t=s.Ub();s.xb(21),s.ac("ngForOf",t.projectViews)}}const k=[{path:"",component:(()=>{class t{constructor(t,e){this.dataService=t,this.logicService=e,this.projectViews=[],this.loaded=!1,this.onProjectsLoaded={next:t=>{this.projects=t,this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=t,this.setDataViews()}},this.loadData()}ngOnInit(){this.loadData()}loadData(){this.dataService.getProjects$().subscribe(this.onProjectsLoaded)}setDataViews(){this.projectViews=this.logicService.composeProjectViews(this.projects,this.transactions),this.loaded=!0}}return t.\u0275fac=function(e){return new(e||t)(s.Hb(i.a),s.Hb(o.a))},t.\u0275cmp=s.Bb({type:t,selectors:[["ng-component"]],decls:8,vars:2,consts:[["noDataYet",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngIf"]],template:function(t,e){if(1&t&&(s.Mb(0,"ab-article"),s.Mb(1,"header"),s.Mb(2,"h2"),s.lc(3," Lista de proyectos "),s.Lb(),s.Lb(),s.Mb(4,"main"),s.jc(5,y,1,0,"ng-template",null,0,s.kc),s.jc(7,w,22,1,"ng-container",1),s.Lb(),s.Lb()),2&t){const t=s.gc(6);s.xb(7),s.ac("ngIf",e.loaded)("ngIfElse",t)}},directives:[l.a,b.l,p.a,b.k,n.d],pipes:[b.d,b.e],styles:[""]}),t})()},{path:"new",loadChildren:()=>a.e(7).then(a.bind(null,"lccA")).then(t=>t.NewProjectModule),data:{title:"Nuevo proyecto"}},{path:":id",component:j}];let O=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[n.e.forChild(k)],n.e]}),t})(),F=(()=>{class t{}return t.\u0275mod=s.Fb({type:t}),t.\u0275inj=s.Eb({factory:function(e){return new(e||t)},imports:[[b.b,O,c.a]]}),t})()}}]);