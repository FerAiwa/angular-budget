(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"0B1/":function(t,e,a){"use strict";a.r(e),a.d(e,"ProjectsModule",(function(){return O}));var b=a("ofXK"),c=a("PCNd"),s=a("tyNb"),n=a("fXoL"),i=a("cplz"),o=a("nXCA"),r=a("zkvF"),l=a("qzOI");let d=(()=>{class t{constructor(){this.userFormat="dd/MM/yyyy",this.botFormat="yyyy/MM/dd"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Bb({type:t,selectors:[["ab-date-time"]],inputs:{date:"date",userFormat:"userFormat",botFormat:"botFormat"},decls:4,vars:8,consts:[[3,"dateTime"]],template:function(t,e){1&t&&(n.Mb(0,"time",0),n.Vb(1,"date"),n.lc(2),n.Vb(3,"date"),n.Lb()),2&t&&(n.bc("dateTime",n.Xb(1,2,e.date,e.botFormat)),n.xb(2),n.mc(n.Xb(3,5,e.date,e.userFormat)))},pipes:[b.d],styles:[""]}),t})(),u=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Bb({type:t,selectors:[["ab-dates"]],inputs:{start:"start",end:"end"},decls:7,vars:2,consts:[[3,"date"]],template:function(t,e){1&t&&(n.Mb(0,"span"),n.Mb(1,"i"),n.lc(2," \u27fc "),n.Ib(3,"ab-date-time",0),n.lc(4," - "),n.Ib(5,"ab-date-time",0),n.lc(6," \u27fb "),n.Lb(),n.Lb()),2&t&&(n.xb(3),n.ac("date",e.start),n.xb(2),n.ac("date",e.end))},directives:[d],styles:[""]}),t})();var p=a("olyB"),h=a("d6BX");function L(t,e){if(1&t&&(n.Mb(0,"header"),n.Mb(1,"h2"),n.lc(2),n.Lb(),n.Mb(3,"p"),n.lc(4),n.Lb(),n.Mb(5,"p"),n.Ib(6,"ab-dates",3),n.Lb(),n.Lb()),2&t){const t=n.Ub();n.xb(2),n.nc(" ",t.project.title," "),n.xb(2),n.mc(t.project.description),n.xb(2),n.ac("start",t.project.start)("end",t.project.end)}}function M(t,e){1&t&&n.Ib(0,"ab-no-data-yet")}function f(t,e){if(1&t&&n.Ib(0,"ab-label-value",12),2&t){const t=e.$implicit;n.bc("value",t.done?"Hecho":"Pendiente"),n.ac("label",t.title)("isOk",t.done)}}function m(t,e){if(1&t&&(n.Ib(0,"ab-label-value",12),n.Vb(1,"number")),2&t){const t=e.$implicit;n.cc("value","",n.Wb(1,3,t.amount)," \u20ac"),n.ac("label",t.title)("isOk","Ingreso"===t.type)}}function v(t,e){if(1&t&&(n.Kb(0),n.Mb(1,"aside"),n.Mb(2,"header"),n.Mb(3,"h3"),n.lc(4,"Datos"),n.Lb(),n.Lb(),n.Ib(5,"ab-label-value",4),n.Vb(6,"date"),n.Ib(7,"ab-label-value",5),n.Vb(8,"date"),n.Ib(9,"ab-label-value",6),n.Vb(10,"number"),n.Ib(11,"ab-label-value",7),n.Vb(12,"number"),n.Ib(13,"ab-label-value",8),n.Vb(14,"number"),n.Ib(15,"ab-label-value",9),n.Vb(16,"number"),n.Ib(17,"ab-label-value",10),n.Vb(18,"number"),n.Lb(),n.Mb(19,"section"),n.Mb(20,"aside"),n.Mb(21,"header"),n.Mb(22,"h3"),n.lc(23,"Tareas"),n.Lb(),n.Lb(),n.jc(24,f,1,3,"ab-label-value",11),n.Lb(),n.Mb(25,"aside"),n.Mb(26,"header"),n.Mb(27,"h3"),n.lc(28,"Transacciones"),n.Lb(),n.Lb(),n.jc(29,m,2,5,"ab-label-value",11),n.Lb(),n.Lb(),n.Mb(30,"footer"),n.Mb(31,"nav"),n.Mb(32,"ul"),n.Mb(33,"li"),n.Mb(34,"a"),n.Mb(35,"i"),n.lc(36,"Cancelar Proyecto"),n.Lb(),n.Lb(),n.Lb(),n.Mb(37,"li"),n.Mb(38,"a"),n.Mb(39,"i"),n.lc(40,"Borrar Proyecto"),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Lb(),n.Jb()),2&t){const t=n.Ub();n.xb(5),n.bc("value",n.Wb(6,13,t.projectView.start)),n.xb(2),n.bc("value",n.Wb(8,15,t.projectView.end)),n.xb(2),n.cc("value","",n.Wb(10,17,t.projectView.budget)," \u20ac"),n.xb(2),n.cc("value","",n.Wb(12,19,t.projectView.totalExpenses)," \u20ac"),n.ac("isOk",!1),n.xb(2),n.cc("value","",n.Wb(14,21,t.projectView.totalIncomes)," \u20ac"),n.ac("isOk",!0),n.xb(2),n.cc("value","",n.Wb(16,23,t.projectView.profit)," \u20ac"),n.ac("isOk",t.projectView.profit>0),n.xb(2),n.cc("value","",n.Wb(18,25,t.projectView.balance)," \u20ac"),n.ac("isOk",t.projectView.balance>0),n.xb(7),n.ac("ngForOf",t.tasks),n.xb(5),n.ac("ngForOf",t.transactions)}}let g=(()=>{class t{constructor(t,e,a,b){this.activatedRoute=t,this.dataService=e,this.logicService=a,this.utilService=b,this.loaded=!1,this.onProjectLoaded={next:t=>{this.project=t,this.utilService.setDocumentTitle(this.project.title),this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=this.logicService.filterTransactionsByProjectId(t,this.projectSlug),this.dataService.getTasks$().subscribe(this.onTasksLoaded)}},this.onTasksLoaded={next:t=>{this.tasks=this.logicService.filterTasksByProjectId(t,this.projectSlug),this.projectView=this.logicService.composeProjectView(this.project,this.transactions),this.loaded=!0}}}ngOnInit(){this.projectSlug=this.activatedRoute.snapshot.params.id,this.loadData()}loadData(){this.dataService.getProject$(this.projectSlug).subscribe(this.onProjectLoaded)}}return t.\u0275fac=function(e){return new(e||t)(n.Hb(s.a),n.Hb(i.a),n.Hb(o.a),n.Hb(r.a))},t.\u0275cmp=n.Bb({type:t,selectors:[["ng-component"]],decls:6,vars:3,consts:[[4,"ngIf"],["noDataYet",""],[4,"ngIf","ngIfElse"],[3,"start","end"],["label","Inicio",3,"value"],["label","Fin",3,"value"],["label","Presupuesto",3,"value"],["label","Gastos",3,"value","isOk"],["label","Ingresos",3,"value","isOk"],["label","Beneficio",3,"value","isOk"],["label","Saldo",3,"value","isOk"],[3,"label","value","isOk",4,"ngFor","ngForOf"],[3,"label","value","isOk"]],template:function(t,e){if(1&t&&(n.Mb(0,"ab-article"),n.jc(1,L,7,4,"header",0),n.Mb(2,"main"),n.jc(3,M,1,0,"ng-template",null,1,n.kc),n.jc(5,v,41,27,"ng-container",2),n.Lb(),n.Lb()),2&t){const t=n.gc(4);n.xb(1),n.ac("ngIf",e.loaded),n.xb(4),n.ac("ngIf",e.loaded)("ngIfElse",t)}},directives:[l.a,b.l,u,p.a,h.a,b.k],pipes:[b.d,b.e],styles:[""]}),t})();function j(t,e){1&t&&n.Ib(0,"ab-no-data-yet")}function y(t,e){1&t&&(n.Mb(0,"sup"),n.lc(1,"*"),n.Lb())}const I=function(t){return[t]};function x(t,e){if(1&t&&(n.Mb(0,"tr"),n.Mb(1,"td"),n.Mb(2,"a",3),n.lc(3),n.Lb(),n.Lb(),n.Mb(4,"td"),n.lc(5),n.Vb(6,"date"),n.Lb(),n.Mb(7,"td"),n.lc(8),n.Vb(9,"date"),n.Lb(),n.Mb(10,"td"),n.lc(11),n.Vb(12,"number"),n.Lb(),n.Mb(13,"td"),n.lc(14),n.Vb(15,"number"),n.Lb(),n.Mb(16,"td"),n.lc(17),n.Vb(18,"number"),n.Lb(),n.Mb(19,"td"),n.lc(20),n.Vb(21,"number"),n.Lb(),n.Mb(22,"td"),n.lc(23),n.Vb(24,"number"),n.jc(25,y,2,0,"sup",4),n.Lb(),n.Lb()),2&t){const t=e.$implicit;n.xb(2),n.ac("routerLink",n.dc(26,I,t.id)),n.xb(1),n.mc(t.title),n.xb(2),n.nc(" ",n.Xb(6,10,t.start,"dd/MM/yyyy")," "),n.xb(3),n.nc(" ",n.Xb(9,13,t.end,"dd/MM/yyyy")," "),n.xb(3),n.nc(" ",n.Wb(12,16,t.budget)," \u20ac "),n.xb(3),n.nc(" ",n.Wb(15,18,t.totalExpenses)," \u20ac "),n.xb(3),n.nc(" ",n.Wb(18,20,t.totalIncomes)," \u20ac "),n.xb(3),n.nc(" ",n.Wb(21,22,t.profit)," \u20ac "),n.xb(3),n.nc(" ",n.Wb(24,24,t.balance)," \u20ac "),n.xb(2),n.ac("ngIf",t.balance<0)}}function V(t,e){if(1&t&&(n.Kb(0),n.Mb(1,"table"),n.Mb(2,"thead"),n.Mb(3,"tr"),n.Mb(4,"th"),n.lc(5," Proyecto "),n.Lb(),n.Mb(6,"th"),n.lc(7," Inicio "),n.Lb(),n.Mb(8,"th"),n.lc(9," Fin "),n.Lb(),n.Mb(10,"th"),n.lc(11," Presupuesto "),n.Lb(),n.Mb(12,"th"),n.lc(13," Gastos "),n.Lb(),n.Mb(14,"th"),n.lc(15," Ingresos "),n.Lb(),n.Mb(16,"th"),n.lc(17," Beneficio "),n.Lb(),n.Mb(18,"th"),n.lc(19," Saldo "),n.Lb(),n.Lb(),n.Lb(),n.Mb(20,"tbody"),n.jc(21,x,26,28,"tr",2),n.Lb(),n.Lb(),n.Jb()),2&t){const t=n.Ub();n.xb(21),n.ac("ngForOf",t.projectViews)}}const w=[{path:"",component:(()=>{class t{constructor(t,e){this.dataService=t,this.logicService=e,this.projectViews=[],this.loaded=!1,this.onProjectsLoaded={next:t=>{this.projects=t,this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=t,this.setDataViews()}},this.loadData()}ngOnInit(){this.loadData()}loadData(){this.dataService.getProjects$().subscribe(this.onProjectsLoaded)}setDataViews(){this.projectViews=this.logicService.composeProjectViews(this.projects,this.transactions),this.loaded=!0}}return t.\u0275fac=function(e){return new(e||t)(n.Hb(i.a),n.Hb(o.a))},t.\u0275cmp=n.Bb({type:t,selectors:[["ng-component"]],decls:8,vars:2,consts:[["noDataYet",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngIf"]],template:function(t,e){if(1&t&&(n.Mb(0,"ab-article"),n.Mb(1,"header"),n.Mb(2,"h2"),n.lc(3," Lista de proyectos "),n.Lb(),n.Lb(),n.Mb(4,"main"),n.jc(5,j,1,0,"ng-template",null,0,n.kc),n.jc(7,V,22,1,"ng-container",1),n.Lb(),n.Lb()),2&t){const t=n.gc(6);n.xb(7),n.ac("ngIf",e.loaded)("ngIfElse",t)}},directives:[l.a,b.l,p.a,b.k,s.d],pipes:[b.d,b.e],styles:[""]}),t})()},{path:"new",loadChildren:()=>a.e(7).then(a.bind(null,"lccA")).then(t=>t.NewProjectModule),data:{title:"Nuevo proyecto"}},{path:":id",component:g}];let k=(()=>{class t{}return t.\u0275mod=n.Fb({type:t}),t.\u0275inj=n.Eb({factory:function(e){return new(e||t)},imports:[[s.e.forChild(w)],s.e]}),t})(),O=(()=>{class t{}return t.\u0275mod=n.Fb({type:t}),t.\u0275inj=n.Eb({factory:function(e){return new(e||t)},imports:[[b.b,k,c.a]]}),t})()}}]);