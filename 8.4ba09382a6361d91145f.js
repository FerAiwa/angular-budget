(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"0B1/":function(t,e,b){"use strict";b.r(e),b.d(e,"ProjectsModule",(function(){return P}));var c=b("ofXK"),n=b("PCNd"),a=b("tyNb"),o=b("fXoL"),i=b("cplz"),s=b("nXCA"),r=b("zkvF"),l=b("qzOI"),d=b("HxqM"),u=b("olyB"),h=b("d6BX");function L(t,e){if(1&t&&(o.Mb(0,"header"),o.Mb(1,"h2"),o.lc(2),o.Lb(),o.Mb(3,"p"),o.lc(4),o.Lb(),o.Mb(5,"p"),o.lc(6," Presupuesto: "),o.Mb(7,"b"),o.lc(8),o.Vb(9,"number"),o.Lb(),o.Ib(10,"ab-dates",3),o.Lb(),o.Lb()),2&t){const t=o.Ub();o.xb(2),o.nc(" ",t.project.title," "),o.xb(2),o.mc(t.project.description),o.xb(4),o.nc("",o.Wb(9,5,t.project.budget)," \u20ac"),o.xb(2),o.ac("start",t.project.start)("end",t.project.end)}}function M(t,e){1&t&&o.Ib(0,"ab-no-data-yet")}function p(t,e){if(1&t&&o.Ib(0,"ab-label-value",6),2&t){const t=e.$implicit;o.bc("value",t.done?"Hecho":"Pendiente"),o.ac("label",t.title)("isOk",t.done)}}function f(t,e){if(1&t&&(o.Ib(0,"ab-label-value",6),o.Vb(1,"number")),2&t){const t=e.$implicit;o.cc("value","",o.Wb(1,3,t.amount)," \u20ac"),o.ac("label",t.title)("isOk","Ingreso"===t.type)}}function g(t,e){if(1&t&&(o.Kb(0),o.Mb(1,"section"),o.Mb(2,"aside"),o.Mb(3,"header"),o.Mb(4,"h3"),o.lc(5,"Tareas"),o.Lb(),o.Lb(),o.jc(6,p,1,3,"ab-label-value",4),o.Lb(),o.Mb(7,"aside"),o.Mb(8,"header"),o.Mb(9,"h3"),o.lc(10,"Transacciones"),o.Lb(),o.Lb(),o.jc(11,f,2,5,"ab-label-value",4),o.Lb(),o.Lb(),o.Mb(12,"footer"),o.Mb(13,"nav"),o.Mb(14,"ul"),o.Mb(15,"li"),o.Mb(16,"a"),o.Mb(17,"i"),o.lc(18,"Cancelar Proyecto"),o.Lb(),o.Lb(),o.Lb(),o.Mb(19,"li"),o.Mb(20,"a"),o.Mb(21,"i"),o.lc(22,"Borrar Proyecto"),o.Lb(),o.Lb(),o.Lb(),o.Mb(23,"li"),o.Mb(24,"a",5),o.Mb(25,"i"),o.lc(26,"Crear Proyecto"),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Jb()),2&t){const t=o.Ub();o.xb(6),o.ac("ngForOf",t.tasks),o.xb(5),o.ac("ngForOf",t.transactions)}}let j=(()=>{class t{constructor(t,e,b,c){this.activatedRoute=t,this.dataService=e,this.logicService=b,this.utilService=c,this.loaded=!1,this.onProjectLoaded={next:t=>{this.project=t,this.utilService.setDocumentTitle(this.project.title),this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=this.logicService.filterTransactionsByProjectId(t,this.projectSlug),this.dataService.getTasks$().subscribe(this.onTasksLoaded)}},this.onTasksLoaded={next:t=>{this.tasks=this.logicService.filterTasksByProjectId(t,this.projectSlug),this.loaded=!0}}}ngOnInit(){this.projectSlug=this.activatedRoute.snapshot.params.id,this.loadData()}loadData(){this.dataService.getProject$(this.projectSlug).subscribe(this.onProjectLoaded)}}return t.\u0275fac=function(e){return new(e||t)(o.Hb(a.a),o.Hb(i.a),o.Hb(s.a),o.Hb(r.a))},t.\u0275cmp=o.Bb({type:t,selectors:[["ng-component"]],decls:6,vars:3,consts:[[4,"ngIf"],["noDataYet",""],[4,"ngIf","ngIfElse"],[3,"start","end"],[3,"label","value","isOk",4,"ngFor","ngForOf"],["routerLink","../new"],[3,"label","value","isOk"]],template:function(t,e){if(1&t&&(o.Mb(0,"ab-article"),o.jc(1,L,11,7,"header",0),o.Mb(2,"main"),o.jc(3,M,1,0,"ng-template",null,1,o.kc),o.jc(5,g,27,2,"ng-container",2),o.Lb(),o.Lb()),2&t){const t=o.gc(4);o.xb(1),o.ac("ngIf",e.loaded),o.xb(4),o.ac("ngIf",e.loaded)("ngIfElse",t)}},directives:[l.a,c.l,d.a,u.a,c.k,a.d,h.a],pipes:[c.e],styles:[""]}),t})();function v(t,e){1&t&&o.Ib(0,"ab-no-data-yet")}function m(t,e){1&t&&(o.Mb(0,"sup"),o.lc(1,"*"),o.Lb())}const y=function(t){return[t]};function x(t,e){if(1&t&&(o.Mb(0,"tr"),o.Mb(1,"td"),o.Mb(2,"a",4),o.lc(3),o.Lb(),o.Lb(),o.Mb(4,"td"),o.lc(5),o.Vb(6,"date"),o.Lb(),o.Mb(7,"td"),o.lc(8),o.Vb(9,"date"),o.Lb(),o.Mb(10,"td"),o.lc(11),o.Vb(12,"number"),o.Lb(),o.Mb(13,"td"),o.lc(14),o.Vb(15,"number"),o.Lb(),o.Mb(16,"td"),o.lc(17),o.Vb(18,"number"),o.Lb(),o.Mb(19,"td"),o.lc(20),o.Vb(21,"number"),o.Lb(),o.Mb(22,"td"),o.lc(23),o.Vb(24,"number"),o.jc(25,m,2,0,"sup",5),o.Lb(),o.Lb()),2&t){const t=e.$implicit;o.xb(2),o.ac("routerLink",o.dc(26,y,t.id)),o.xb(1),o.mc(t.title),o.xb(2),o.nc(" ",o.Xb(6,10,t.start,"dd/MM/yyyy")," "),o.xb(3),o.nc(" ",o.Xb(9,13,t.end,"dd/MM/yyyy")," "),o.xb(3),o.nc(" ",o.Wb(12,16,t.budget)," \u20ac "),o.xb(3),o.nc(" ",o.Wb(15,18,t.totalExpenses)," \u20ac "),o.xb(3),o.nc(" ",o.Wb(18,20,t.totalIncomes)," \u20ac "),o.xb(3),o.nc(" ",o.Wb(21,22,t.profit)," \u20ac "),o.xb(3),o.nc(" ",o.Wb(24,24,t.balance)," \u20ac "),o.xb(2),o.ac("ngIf",t.balance<0)}}function I(t,e){if(1&t&&(o.Kb(0),o.Mb(1,"table"),o.Mb(2,"thead"),o.Mb(3,"tr"),o.Mb(4,"th"),o.lc(5," Proyecto "),o.Lb(),o.Mb(6,"th"),o.lc(7," Inicio "),o.Lb(),o.Mb(8,"th"),o.lc(9," Fin "),o.Lb(),o.Mb(10,"th"),o.lc(11," Presupuesto "),o.Lb(),o.Mb(12,"th"),o.lc(13," Gastos "),o.Lb(),o.Mb(14,"th"),o.lc(15," Ingresos "),o.Lb(),o.Mb(16,"th"),o.lc(17," Beneficio "),o.Lb(),o.Mb(18,"th"),o.lc(19," Saldo "),o.Lb(),o.Lb(),o.Lb(),o.Mb(20,"tbody"),o.jc(21,x,26,28,"tr",3),o.Lb(),o.Lb(),o.Jb()),2&t){const t=o.Ub();o.xb(21),o.ac("ngForOf",t.projectViews)}}const k=[{path:"",component:(()=>{class t{constructor(t,e){this.dataService=t,this.logicService=e,this.projectViews=[],this.loaded=!1,this.onProjectsLoaded={next:t=>{this.projects=t,this.dataService.getTransactions$().subscribe(this.onTransactionsLoaded)}},this.onTransactionsLoaded={next:t=>{this.transactions=t,this.setDataViews()}},this.loadData()}ngOnInit(){this.loadData()}loadData(){this.dataService.getProjects$().subscribe(this.onProjectsLoaded)}setDataViews(){this.projectViews=this.logicService.composeProjectViews(this.projects,this.transactions),this.loaded=!0}}return t.\u0275fac=function(e){return new(e||t)(o.Hb(i.a),o.Hb(s.a))},t.\u0275cmp=o.Bb({type:t,selectors:[["ng-component"]],decls:14,vars:2,consts:[["routerLink","new"],["noDataYet",""],[4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[3,"routerLink"],[4,"ngIf"]],template:function(t,e){if(1&t&&(o.Mb(0,"ab-article"),o.Mb(1,"header"),o.Mb(2,"nav"),o.Mb(3,"h2"),o.lc(4," Gesti\xf3n de proyectos "),o.Lb(),o.Mb(5,"ul"),o.Mb(6,"li"),o.Mb(7,"a",0),o.Mb(8,"i"),o.lc(9,"Nuevo proyecto"),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Lb(),o.Mb(10,"main"),o.jc(11,v,1,0,"ng-template",null,1,o.kc),o.jc(13,I,22,1,"ng-container",2),o.Lb(),o.Lb()),2&t){const t=o.gc(12);o.xb(13),o.ac("ngIf",e.loaded)("ngIfElse",t)}},directives:[l.a,a.d,c.l,u.a,c.k],pipes:[c.d,c.e],styles:[""]}),t})()},{path:"new",loadChildren:()=>b.e(7).then(b.bind(null,"lccA")).then(t=>t.NewProjectModule),data:{title:"Nuevo proyecto"}},{path:":id",component:j}];let w=(()=>{class t{}return t.\u0275mod=o.Fb({type:t}),t.\u0275inj=o.Eb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(k)],a.e]}),t})(),P=(()=>{class t{}return t.\u0275mod=o.Fb({type:t}),t.\u0275inj=o.Eb({factory:function(e){return new(e||t)},imports:[[c.b,w,n.a]]}),t})()}}]);